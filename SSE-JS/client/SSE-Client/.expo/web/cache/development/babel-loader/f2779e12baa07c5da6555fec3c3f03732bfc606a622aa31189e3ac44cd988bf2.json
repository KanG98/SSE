{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport MapView, { Marker } from \"react-native-maps\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar MapApp = function MapApp() {\n  var _React$useState = React.useState({\n      latitude: 40.715219,\n      longitude: -74.014249,\n      longitude: -74.010685,\n      latitudeDelta: 0.0091,\n      longitudeDelta: 0.011\n    }),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    currentLocation = _React$useState2[0],\n    setCurrentLocation = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    isPaused = _React$useState4[0],\n    setPause = _React$useState4[1];\n  var ws = React.useRef(null);\n  React.useMemo(function () {\n    ws.current = new WebSocket(\"ws://localhost:9090/dm1\");\n    ws.current.onopen = function () {\n      return console.log(\"ws opened\");\n    };\n    ws.current.onclose = function () {\n      return console.log(\"ws closed\");\n    };\n    var wsCurrent = ws.current;\n    return function () {\n      wsCurrent.close();\n    };\n  }, []);\n  React.useMemo(function () {\n    if (!ws.current) return;\n    ws.current.onmessage = function (message) {\n      if (isPaused) return;\n      if (message) {\n        var location = message.data.split(\",\");\n        console.log(location);\n        setCurrentLocation({\n          latitude: parseFloat(location[0]),\n          longitude: parseFloat(location[1])\n        });\n      }\n    };\n  }, [isPaused]);\n  return currentLocation ? _jsx(MapView, {\n    style: styles.map,\n    region: {\n      latitude: currentLocation.latitude,\n      longitude: currentLocation.longitude,\n      latitudeDelta: 0.0091,\n      longitudeDelta: 0.011\n    },\n    children: _jsx(Marker, {\n      coordinate: {\n        latitude: currentLocation.latitude,\n        longitude: currentLocation.longitude,\n        title: 'Foo Place',\n        subtitle: '1234 Foo Drive'\n      }\n    })\n  }) : null;\n};\nvar styles = StyleSheet.create({\n  container: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    flex: 1,\n    justifyContent: \"flex-end\",\n    alignItems: \"center\"\n  }),\n  map: _objectSpread({}, StyleSheet.absoluteFillObject)\n});\nexport default MapApp;","map":{"version":3,"names":["React","StyleSheet","Text","View","MapView","Marker","jsx","_jsx","MapApp","_React$useState","useState","latitude","longitude","latitudeDelta","longitudeDelta","_React$useState2","_slicedToArray","currentLocation","setCurrentLocation","_React$useState3","_React$useState4","isPaused","setPause","ws","useRef","useMemo","current","WebSocket","onopen","console","log","onclose","wsCurrent","close","onmessage","message","location","data","split","parseFloat","style","styles","map","region","children","coordinate","title","subtitle","create","container","_objectSpread","absoluteFillObject","flex","justifyContent","alignItems"],"sources":["/Users/kylexue/Desktop/SSE/SSE-JS/SSE-Client/MapApp.js"],"sourcesContent":["import React from 'react';\nimport { StyleSheet, Text, View} from 'react-native';\nimport MapView, { Marker } from \"react-native-maps\";\n\nconst MapApp = () => {\n  \n  const [currentLocation, setCurrentLocation] = React.useState({\n    latitude:40.715219,\n    longitude: -74.014249,\n    longitude: -74.010685,\n    latitudeDelta: 0.0091,\n    longitudeDelta: 0.011,\n  })\n  const [isPaused, setPause] = React.useState(false);\n  const ws = React.useRef(null);\n  \n    React.useMemo(() => {\n        ws.current = new WebSocket(\"ws://localhost:9090/dm1\");\n        ws.current.onopen = () => console.log(\"ws opened\");\n        ws.current.onclose = () => console.log(\"ws closed\");\n  \n        const wsCurrent = ws.current;\n  \n        return () => {\n            wsCurrent.close();\n        };\n    }, []);\n  \n    React.useMemo(() => {\n        if (!ws.current) return;\n  \n        ws.current.onmessage = message => {\n            if (isPaused) return;\n            if(message) {\n              let location = message.data.split(\",\")\n              console.log(location)\n              setCurrentLocation({latitude: parseFloat(location[0]), longitude: parseFloat(location[1])})\n            }\n        };\n    }, [isPaused]);\n\n  return (\n    currentLocation ? \n      <MapView\n        style={styles.map}\n        region={{\n          latitude: currentLocation.latitude,\n          longitude: currentLocation.longitude,\n          latitudeDelta: 0.0091,\n          longitudeDelta: 0.011,\n        }}\n      >\n      <Marker coordinate={{\n          latitude: currentLocation.latitude,\n          longitude: currentLocation.longitude,\n          title: 'Foo Place',\n          subtitle: '1234 Foo Drive'\n  }} />\n        </MapView>\n  : null\n  );\n};\n\n//create our styling code:\nconst styles = StyleSheet.create({\n  container: {\n    ...StyleSheet.absoluteFillObject,\n    flex: 1, //the container will fill the whole screen.\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n  },\n  map: {\n    ...StyleSheet.absoluteFillObject,\n  },\n});\n\nexport default MapApp;"],"mappings":";;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AAAC,OAAAC,UAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,IAAA;AAE1B,OAAOC,OAAO,IAAIC,MAAM,QAAQ,mBAAmB;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAEpD,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAA,EAAS;EAEnB,IAAAC,eAAA,GAA8CT,KAAK,CAACU,QAAQ,CAAC;MAC3DC,QAAQ,EAAC,SAAS;MAClBC,SAAS,EAAE,CAAC,SAAS;MACrBA,SAAS,EAAE,CAAC,SAAS;MACrBC,aAAa,EAAE,MAAM;MACrBC,cAAc,EAAE;IAClB,CAAC,CAAC;IAAAC,gBAAA,GAAAC,cAAA,CAAAP,eAAA;IANKQ,eAAe,GAAAF,gBAAA;IAAEG,kBAAkB,GAAAH,gBAAA;EAO1C,IAAAI,gBAAA,GAA6BnB,KAAK,CAACU,QAAQ,CAAC,KAAK,CAAC;IAAAU,gBAAA,GAAAJ,cAAA,CAAAG,gBAAA;IAA3CE,QAAQ,GAAAD,gBAAA;IAAEE,QAAQ,GAAAF,gBAAA;EACzB,IAAMG,EAAE,GAAGvB,KAAK,CAACwB,MAAM,CAAC,IAAI,CAAC;EAE3BxB,KAAK,CAACyB,OAAO,CAAC,YAAM;IAChBF,EAAE,CAACG,OAAO,GAAG,IAAIC,SAAS,CAAC,yBAAyB,CAAC;IACrDJ,EAAE,CAACG,OAAO,CAACE,MAAM,GAAG;MAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IAAA;IAClDP,EAAE,CAACG,OAAO,CAACK,OAAO,GAAG;MAAA,OAAMF,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IAAA;IAEnD,IAAME,SAAS,GAAGT,EAAE,CAACG,OAAO;IAE5B,OAAO,YAAM;MACTM,SAAS,CAACC,KAAK,CAAC,CAAC;IACrB,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAENjC,KAAK,CAACyB,OAAO,CAAC,YAAM;IAChB,IAAI,CAACF,EAAE,CAACG,OAAO,EAAE;IAEjBH,EAAE,CAACG,OAAO,CAACQ,SAAS,GAAG,UAAAC,OAAO,EAAI;MAC9B,IAAId,QAAQ,EAAE;MACd,IAAGc,OAAO,EAAE;QACV,IAAIC,QAAQ,GAAGD,OAAO,CAACE,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC;QACtCT,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;QACrBlB,kBAAkB,CAAC;UAACP,QAAQ,EAAE4B,UAAU,CAACH,QAAQ,CAAC,CAAC,CAAC,CAAC;UAAExB,SAAS,EAAE2B,UAAU,CAACH,QAAQ,CAAC,CAAC,CAAC;QAAC,CAAC,CAAC;MAC7F;IACJ,CAAC;EACL,CAAC,EAAE,CAACf,QAAQ,CAAC,CAAC;EAEhB,OACEJ,eAAe,GACbV,IAAA,CAACH,OAAO;IACNoC,KAAK,EAAEC,MAAM,CAACC,GAAI;IAClBC,MAAM,EAAE;MACNhC,QAAQ,EAAEM,eAAe,CAACN,QAAQ;MAClCC,SAAS,EAAEK,eAAe,CAACL,SAAS;MACpCC,aAAa,EAAE,MAAM;MACrBC,cAAc,EAAE;IAClB,CAAE;IAAA8B,QAAA,EAEJrC,IAAA,CAACF,MAAM;MAACwC,UAAU,EAAE;QAChBlC,QAAQ,EAAEM,eAAe,CAACN,QAAQ;QAClCC,SAAS,EAAEK,eAAe,CAACL,SAAS;QACpCkC,KAAK,EAAE,WAAW;QAClBC,QAAQ,EAAE;MAClB;IAAE,CAAE;EAAC,CACU,CAAC,GACd,IAAI;AAER,CAAC;AAGD,IAAMN,MAAM,GAAGxC,UAAU,CAAC+C,MAAM,CAAC;EAC/BC,SAAS,EAAAC,aAAA,CAAAA,aAAA,KACJjD,UAAU,CAACkD,kBAAkB;IAChCC,IAAI,EAAE,CAAC;IACPC,cAAc,EAAE,UAAU;IAC1BC,UAAU,EAAE;EAAQ,EACrB;EACDZ,GAAG,EAAAQ,aAAA,KACEjD,UAAU,CAACkD,kBAAkB;AAEpC,CAAC,CAAC;AAEF,eAAe3C,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}